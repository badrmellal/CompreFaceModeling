<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸª‚ 1BIP - Troupes AÃ©roportÃ©es Marocaines | ContrÃ´le d'AccÃ¨s</title>
    <meta name="description" content="SystÃ¨me de ContrÃ´le d'AccÃ¨s BiomÃ©trique Militaire 1BIP">
    <link rel="stylesheet" href="/static/css/dashboard.css">
</head>
<body>
    <!-- En-tÃªte -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="header-title">
                    <h1>ðŸª‚ 1BIP - Ø§Ù„Ù‚ÙˆØ§Øª Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© Ø¬ÙˆØ§Ù‹ Ø§Ù„Ù…ØºØ±Ø¨ÙŠØ© | Troupes AÃ©roportÃ©es Marocaines</h1>
                    <h2 class="subtitle">1Ã¨re Brigade d'Infanterie Parachutiste | SystÃ¨me de ContrÃ´le d'AccÃ¨s BiomÃ©trique</h2>
                </div>
                <div class="header-info">
                    <span id="currentTime" class="time">--:--:--</span>
                    <span class="status-indicator" id="systemStatus">
                        <span class="status-dot online"></span> SYSTÃˆME SÃ‰CURISÃ‰
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Cartes de Statistiques RÃ©sumÃ©es -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ðŸª–</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="totalToday">0</h3>
                    <p class="stat-label">AccÃ¨s Total Aujourd'hui</p>
                </div>
            </div>

            <div class="stat-card success">
                <div class="stat-icon">âœ…</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="authorizedToday">0</h3>
                    <p class="stat-label">Personnel AutorisÃ©</p>
                </div>
            </div>

            <div class="stat-card danger">
                <div class="stat-icon">ðŸš¨</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="unauthorizedToday">0</h3>
                    <p class="stat-label">Alertes de SÃ©curitÃ©</p>
                </div>
            </div>

            <div class="stat-card info">
                <div class="stat-icon">ðŸª‚</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="uniqueEmployees">0</h3>
                    <p class="stat-label">Parachutistes Actifs</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">ðŸ“¹</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="activeCameras">0</h3>
                    <p class="stat-label">CamÃ©ras de Surveillance</p>
                </div>
            </div>
        </div>

        <!-- Navigation par Onglets -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="live">ðŸ”´ Moniteur de SÃ©curitÃ© en Direct</button>
            <button class="tab-btn" data-tab="attendance">ðŸ“‹ Suivi du Personnel</button>
            <button class="tab-btn" data-tab="unauthorized">ðŸš¨ Alertes de SÃ©curitÃ©</button>
            <button class="tab-btn" data-tab="cameras">ðŸ“¹ Ã‰tat de Surveillance</button>
            <button class="tab-btn" data-tab="reports">ðŸ“Š Rapports d'OpÃ©rations</button>
        </div>

        <!-- Contenu des Onglets -->
        <div class="tab-content active" id="tab-live">
            <h2>Moniteur de SÃ©curitÃ© en Direct - ContrÃ´le d'AccÃ¨s en Temps RÃ©el</h2>
            <div class="controls">
                <button class="btn btn-primary" onclick="refreshLiveMonitor()">ðŸ”„ Actualiser</button>
                <label>
                    Actualisation automatique:
                    <input type="checkbox" id="autoRefresh" checked>
                    <span id="refreshCountdown"></span>
                </label>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Heure</th>
                            <th>CamÃ©ra</th>
                            <th>Personne</th>
                            <th>Statut</th>
                            <th>Confiance</th>
                            <th>Alerte</th>
                        </tr>
                    </thead>
                    <tbody id="liveAccessTable">
                        <tr>
                            <td colspan="6" class="loading">Chargement des donnÃ©es...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tab-content" id="tab-attendance">
            <h2>PrÃ©sence d'Aujourd'hui</h2>
            <div class="controls">
                <button class="btn btn-primary" onclick="refreshAttendance()">ðŸ”„ Actualiser</button>
                <button class="btn btn-secondary" onclick="exportAttendance()">ðŸ“¥ Exporter CSV</button>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Personnel</th>
                            <th>PremiÃ¨re EntrÃ©e</th>
                            <th>DerniÃ¨re EntrÃ©e</th>
                            <th>Total EntrÃ©es</th>
                            <th>CamÃ©ra</th>
                            <th>Confiance Moy.</th>
                        </tr>
                    </thead>
                    <tbody id="attendanceTable">
                        <tr>
                            <td colspan="6" class="loading">Chargement des donnÃ©es de prÃ©sence...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tab-content" id="tab-unauthorized">
            <h2>Tentatives d'AccÃ¨s Non AutorisÃ©es</h2>
            <div class="controls">
                <label>
                    Plage Horaire:
                    <select id="unauthorizedHours" onchange="refreshUnauthorized()">
                        <option value="1">DerniÃ¨re Heure</option>
                        <option value="6">6 DerniÃ¨res Heures</option>
                        <option value="24" selected>24 DerniÃ¨res Heures</option>
                        <option value="168">DerniÃ¨re Semaine</option>
                    </select>
                </label>
                <button class="btn btn-primary" onclick="refreshUnauthorized()">ðŸ”„ Actualiser</button>
            </div>
            <div id="unauthorizedCount" class="alert-count"></div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Horodatage</th>
                            <th>CamÃ©ra</th>
                            <th>Localisation</th>
                            <th>DÃ©tectÃ© Comme</th>
                            <th>Alerte EnvoyÃ©e</th>
                        </tr>
                    </thead>
                    <tbody id="unauthorizedTable">
                        <tr>
                            <td colspan="5" class="loading">Chargement des donnÃ©es d'accÃ¨s non autorisÃ©s...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tab-content" id="tab-cameras">
            <h2>Ã‰tat des CamÃ©ras</h2>
            <div class="controls">
                <button class="btn btn-primary" onclick="refreshCameraStatus()">ðŸ”„ Actualiser</button>
            </div>
            <div class="camera-grid" id="cameraGrid">
                <div class="loading">Chargement de l'Ã©tat des camÃ©ras...</div>
            </div>
        </div>

        <div class="tab-content" id="tab-reports">
            <h2>Rapports & Analyses</h2>
            <div class="report-section">
                <h3>Rapport de PrÃ©sence</h3>
                <div class="controls">
                    <label>
                        Date de DÃ©but:
                        <input type="date" id="reportStartDate">
                    </label>
                    <label>
                        Date de Fin:
                        <input type="date" id="reportEndDate">
                    </label>
                    <button class="btn btn-primary" onclick="generateReport()">ðŸ“Š GÃ©nÃ©rer Rapport</button>
                    <button class="btn btn-secondary" onclick="exportReport()">ðŸ“¥ Exporter CSV</button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Personnel</th>
                                <th>PremiÃ¨re EntrÃ©e</th>
                                <th>DerniÃ¨re EntrÃ©e</th>
                                <th>Nombre d'EntrÃ©es</th>
                            </tr>
                        </thead>
                        <tbody id="reportTable">
                            <tr>
                                <td colspan="5" class="empty">SÃ©lectionnez la plage de dates et cliquez sur "GÃ©nÃ©rer Rapport"</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="report-section">
                <h3>Graphique d'ActivitÃ© Horaire</h3>
                <div id="hourlyChart" class="chart-container">
                    <canvas id="activityChart" width="800" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Pied de page -->
    <footer class="footer">
        <div class="container">
            <p>ðŸ‡²ðŸ‡¦ Â© 2025 1BIP - Forces ArmÃ©es Royales Marocaines - Troupes AÃ©roportÃ©es | CLASSIFIÃ‰ - USAGE MILITAIRE UNIQUEMENT</p>
            <p style="font-size: 0.875rem; margin-top: 0.5rem;">1BIP - Ø§Ù„Ù„ÙˆØ§Ø¡ Ø§Ù„Ø£ÙˆÙ„ Ù„Ù„Ù…Ø´Ø§Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© Ø¬ÙˆØ§Ù‹ | DerniÃ¨re Mise Ã  Jour: <span id="lastUpdate">--:--:--</span></p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="/static/js/dashboard.js"></script>
</body>
</html>
