# 1BIP - Moroccan Airborne Troops - Camera Service Configuration
# 1st Airborne Infantry Battalion - Hikvision Military Surveillance
# Configure your Hikvision military surveillance camera settings here
# CLASSIFIED - MILITARY USE ONLY

# ===================================
# CAMERA CONFIGURATION
# ===================================

# Hikvision Military Camera RTSP URL Format:
# rtsp://[username]:[password]@[camera_ip]:[port]/Streaming/Channels/[channel]
# Common channels: 101 (Main Stream - HD), 102 (Sub Stream - Lower Res)
CAMERA_RTSP_URL=rtsp://admin:MoroccoAirborne2025@192.168.1.100:554/Streaming/Channels/101

# Camera identification
CAMERA_NAME=1BIP Base Main Entry Point
CAMERA_LOCATION=1BIP Airborne Base - Security Checkpoint Alpha

# ===================================
# VIDEO PROCESSING SETTINGS
# ===================================

# Process every Nth frame (M3 Max optimized - lower = more frequent checks)
# M3 Max can handle more frames due to MPS GPU acceleration
# Recommended: 2-3 for high-security military checkpoints
FRAME_SKIP=2

# Hikvision 8MP Military Camera Resolution
# M3 Max with MPS can handle 4K resolution efficiently
# 4K: 2560x1440 or 1920x1080 (Full HD)
FRAME_WIDTH=2560
FRAME_HEIGHT=1440

# ===================================
# COMPREFACE INTEGRATION
# ===================================

# CompreFace API URL (usually internal docker network)
COMPREFACE_API_URL=http://compreface-api:8080

# CompreFace Recognition Service API Key
# Get this from CompreFace UI -> Applications -> Your App -> Recognition Service
COMPREFACE_API_KEY=your-api-key-here

# ===================================
# RECOGNITION THRESHOLDS
# ===================================

# Similarity threshold for authorized access (0.0 to 1.0)
# 0.88 = 88% similarity required (Military Grade - Higher Security)
# Higher = more strict, Lower = more lenient
# Military Recommendation: 0.85 - 0.92 for high-security checkpoints
SIMILARITY_THRESHOLD=0.88

# Detection probability threshold (0.0 to 1.0)
# Minimum confidence for face detection
# Military Recommendation: 0.75 - 0.85 for reliable detection
DET_PROB_THRESHOLD=0.80

# ===================================
# ALERT CONFIGURATION
# ===================================

# Enable/disable alerts for unauthorized access
ENABLE_ALERTS=true

# Webhook URL for alert notifications
# Example: Slack, Discord, Microsoft Teams, custom endpoint
# Leave empty to disable webhook alerts
ALERT_WEBHOOK_URL=

# Email for alert notifications
# Leave empty to disable email alerts
ALERT_EMAIL=security@1bip.com

# Alert cooldown period in seconds
# Prevents alert spam - won't send another alert within this time
# Recommended: 30-120 seconds
ALERT_COOLDOWN_SECONDS=60

# ===================================
# DATABASE CONFIGURATION
# ===================================

# PostgreSQL connection settings
DB_HOST=compreface-postgres-db
DB_PORT=5432
DB_NAME=frs_1bip
DB_USER=postgres
DB_PASSWORD=1BIP_SecurePassword_2025

# ===================================
# PERFORMANCE SETTINGS
# ===================================

# Maximum faces to detect per frame
# Higher = more CPU usage
# Recommended: 5-10 for entrance gates
MAX_FACES_PER_FRAME=10

# Reconnection delay if camera disconnects (seconds)
RECONNECT_DELAY=5

# ===================================
# DEBUGGING & DEVELOPMENT
# ===================================

# Save images of unauthorized access attempts
# WARNING: This will consume disk space
SAVE_DEBUG_IMAGES=true

# Debug image storage path (inside container)
DEBUG_IMAGE_PATH=/app/logs/debug_images

# ===================================
# MULTIPLE CAMERA SUPPORT
# ===================================
# To run multiple camera instances, copy this file and change:
# - CAMERA_RTSP_URL
# - CAMERA_NAME
# - CAMERA_LOCATION
# Then run multiple docker containers with different config files
