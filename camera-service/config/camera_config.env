# 1BIP Camera Service Configuration
# Configure your Hikvision camera settings here

# ===================================
# CAMERA CONFIGURATION
# ===================================

# Hikvision Camera RTSP URL Format:
# rtsp://[username]:[password]@[camera_ip]:[port]/Streaming/Channels/[channel]
# Common channels: 101 (Main Stream), 102 (Sub Stream)
CAMERA_RTSP_URL=rtsp://admin:Admin123@192.168.1.100:554/Streaming/Channels/101

# Camera identification
CAMERA_NAME=Main Entrance Gate
CAMERA_LOCATION=Building A - Main Gate

# ===================================
# VIDEO PROCESSING SETTINGS
# ===================================

# Process every Nth frame (higher = faster but less frequent checks)
# Recommended: 5-10 for entrance gates
FRAME_SKIP=5

# Hikvision 8MP Resolution (adjust based on your camera model)
# 8MP: 3840x2160 (4K) or 3264Ã—2448
# For better performance, you can use lower resolution: 1920x1080 (Full HD)
FRAME_WIDTH=1920
FRAME_HEIGHT=1080

# ===================================
# COMPREFACE INTEGRATION
# ===================================

# CompreFace API URL (usually internal docker network)
COMPREFACE_API_URL=http://compreface-api:8080

# CompreFace Recognition Service API Key
# Get this from CompreFace UI -> Applications -> Your App -> Recognition Service
COMPREFACE_API_KEY=your-api-key-here

# ===================================
# RECOGNITION THRESHOLDS
# ===================================

# Similarity threshold for authorized access (0.0 to 1.0)
# 0.85 = 85% similarity required
# Higher = more strict, Lower = more lenient
# Recommended: 0.80 - 0.90 for entrance gates
SIMILARITY_THRESHOLD=0.85

# Detection probability threshold (0.0 to 1.0)
# Minimum confidence for face detection
# Recommended: 0.7 - 0.9
DET_PROB_THRESHOLD=0.8

# ===================================
# ALERT CONFIGURATION
# ===================================

# Enable/disable alerts for unauthorized access
ENABLE_ALERTS=true

# Webhook URL for alert notifications
# Example: Slack, Discord, Microsoft Teams, custom endpoint
# Leave empty to disable webhook alerts
ALERT_WEBHOOK_URL=

# Email for alert notifications
# Leave empty to disable email alerts
ALERT_EMAIL=security@1bip.com

# Alert cooldown period in seconds
# Prevents alert spam - won't send another alert within this time
# Recommended: 30-120 seconds
ALERT_COOLDOWN_SECONDS=60

# ===================================
# DATABASE CONFIGURATION
# ===================================

# PostgreSQL connection settings
DB_HOST=compreface-postgres-db
DB_PORT=5432
DB_NAME=frs_1bip
DB_USER=postgres
DB_PASSWORD=1BIP_SecurePassword_2025

# ===================================
# PERFORMANCE SETTINGS
# ===================================

# Maximum faces to detect per frame
# Higher = more CPU usage
# Recommended: 5-10 for entrance gates
MAX_FACES_PER_FRAME=10

# Reconnection delay if camera disconnects (seconds)
RECONNECT_DELAY=5

# ===================================
# DEBUGGING & DEVELOPMENT
# ===================================

# Save images of unauthorized access attempts
# WARNING: This will consume disk space
SAVE_DEBUG_IMAGES=true

# Debug image storage path (inside container)
DEBUG_IMAGE_PATH=/app/logs/debug_images

# ===================================
# MULTIPLE CAMERA SUPPORT
# ===================================
# To run multiple camera instances, copy this file and change:
# - CAMERA_RTSP_URL
# - CAMERA_NAME
# - CAMERA_LOCATION
# Then run multiple docker containers with different config files
