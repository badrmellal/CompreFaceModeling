# 1BIP - Troupes Aéroportées Marocaines - Configuration Service Caméra
# 1ère Brigade d'Infanterie Parachutiste - Surveillance Militaire Hikvision
# Configurez vos paramètres de caméra de surveillance militaire Hikvision ici
# CLASSIFIÉ - USAGE MILITAIRE UNIQUEMENT

# ===================================
# CONFIGURATION CAMÉRA
# ===================================

# Format URL RTSP Caméra Militaire Hikvision:
# rtsp://[nom_utilisateur]:[mot_de_passe]@[ip_camera]:[port]/Streaming/Channels/[canal]
# Canaux communs: 101 (Flux Principal - HD 8MP), 102 (Flux Secondaire - Résolution Inférieure)
CAMERA_RTSP_URL=rtsp://admin:VotreMotDePasse@192.168.1.100:554/Streaming/Channels/101

# Identification de la caméra
CAMERA_NAME=1BIP Base Portail Principal
CAMERA_LOCATION=1BIP Base Brigade - Point de Contrôle Sécurité Alpha

# ===================================
# VIDEO PROCESSING SETTINGS
# ===================================

# Process every Nth frame (M3 Max optimized - lower = more frequent checks)
# M3 Max can handle more frames due to MPS GPU acceleration
# Recommended: 2-3 for high-security military checkpoints
FRAME_SKIP=2

# Hikvision 8MP Military Camera Resolution
# M3 Max with MPS can handle 4K resolution efficiently
# 4K: 2560x1440 or 1920x1080 (Full HD)
FRAME_WIDTH=2560
FRAME_HEIGHT=1440

# ===================================
# INTÉGRATION COMPREFACE (100% HORS LIGNE!)
# ===================================

# URL API CompreFace (réseau docker interne - PAS D'INTERNET)
COMPREFACE_API_URL=http://compreface-api:8080

# ⚠️ CLÉ API DU SERVICE DE RECONNAISSANCE COMPREFACE
#
# IMPORTANT: Cette clé est générée par VOTRE PROPRE instance CompreFace locale!
# Ce n'est PAS une clé d'internet - tout est 100% hors ligne sur votre serveur.
#
# COMMENT OBTENIR VOTRE CLÉ API:
# 1. Démarrer CompreFace: docker-compose up -d
# 2. Attendre 3 minutes pour l'initialisation
# 3. Ouvrir http://localhost:8000 dans votre navigateur
# 4. Se connecter (ou créer un compte si première fois)
# 5. Aller dans "Applications" → "Créer une Application"
#    - Nom: "1BIP Base Principale" (ou nom de votre unité)
# 6. Dans l'application → "Services" → Activer "Recognition"
# 7. COPIER la clé API affichée (ex: 00000000-0000-0000-0000-000000000001)
# 8. Coller la clé ci-dessous
# 9. Redémarrer: docker-compose restart 1bip-camera-service
#
# EXEMPLE DE CLÉ: 00000000-0000-0000-0000-000000000001
COMPREFACE_API_KEY=REMPLACER_PAR_VOTRE_CLE_API_ICI

# ===================================
# RECOGNITION THRESHOLDS
# ===================================

# Similarity threshold for authorized access (0.0 to 1.0)
# 0.88 = 88% similarity required (Military Grade - Higher Security)
# Higher = more strict, Lower = more lenient
# Military Recommendation: 0.85 - 0.92 for high-security checkpoints
SIMILARITY_THRESHOLD=0.88

# Detection probability threshold (0.0 to 1.0)
# Minimum confidence for face detection
# Military Recommendation: 0.75 - 0.85 for reliable detection
DET_PROB_THRESHOLD=0.80

# ===================================
# ALERT CONFIGURATION
# ===================================

# Enable/disable alerts for unauthorized access
ENABLE_ALERTS=true

# Webhook URL for alert notifications
# Example: Slack, Discord, Microsoft Teams, custom endpoint
# Leave empty to disable webhook alerts
ALERT_WEBHOOK_URL=

# Email for alert notifications
# Leave empty to disable email alerts
ALERT_EMAIL=security@1bip.com

# Alert cooldown period in seconds
# Prevents alert spam - won't send another alert within this time
# Recommended: 30-120 seconds
ALERT_COOLDOWN_SECONDS=60

# ===================================
# DATABASE CONFIGURATION
# ===================================

# Paramètres de connexion PostgreSQL
# IMPORTANT: Le mot de passe doit correspondre à celui dans le fichier .env principal
DB_HOST=compreface-postgres-db
DB_PORT=5432
DB_NAME=morocco_1bip_frs
DB_USER=postgres
DB_PASSWORD=Morocco_Airborne_Secure2025!

# ===================================
# PERFORMANCE SETTINGS
# ===================================

# Maximum faces to detect per frame
# Higher = more CPU usage
# Recommended: 5-10 for entrance gates
MAX_FACES_PER_FRAME=10

# Reconnection delay if camera disconnects (seconds)
RECONNECT_DELAY=5

# ===================================
# DEBUGGING & DEVELOPMENT
# ===================================

# Save images of unauthorized access attempts
# WARNING: This will consume disk space
SAVE_DEBUG_IMAGES=true

# Debug image storage path (inside container)
DEBUG_IMAGE_PATH=/app/logs/debug_images

# ===================================
# MULTIPLE CAMERA SUPPORT
# ===================================
# To run multiple camera instances, copy this file and change:
# - CAMERA_RTSP_URL
# - CAMERA_NAME
# - CAMERA_LOCATION
# Then run multiple docker containers with different config files
